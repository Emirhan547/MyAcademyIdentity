@model List<Message>

<li class="nav-item dropdown">
    <a class="nav-link" data-toggle="dropdown" href="#">
        <i class="far fa-comments"></i>
        <span class="badge badge-danger navbar-badge">@Model.Count</span>
    </a>
    <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
        @foreach (var item in Model)
        {
            <a href="/Message/MessageDetails/@item.MessageId" class="dropdown-item">
                <div class="media">
                    @if (!string.IsNullOrEmpty(item.Sender?.ImageUrl))
                    {
                        <img src="@Url.Content(item.Sender.ImageUrl)" alt="User Avatar" class="img-size-50 mr-3 img-circle" />
                    }
                    <div class="media-body" style="max-width: 220px; overflow: hidden;">
                        <h3 class="dropdown-item-title text-truncate">
                            @item.Sender?.FirstName @item.Sender?.LastName
                        </h3>
                        <p class="text-sm text-truncate">
                            @((item.Body?.Length > 50) ? item.Body.Substring(0, 50) + "..." : item.Body)
                        </p>
                        <p class="text-sm text-muted">
                            <i class="far fa-clock mr-1"></i> @item.SentDate.ToString("g")
                        </p>
                    </div>
                </div>
            </a>
            <div class="dropdown-divider"></div>
        }
        <a href="/Message/Index" class="dropdown-item dropdown-footer">Tümünü Gör</a>
    </div>
</li>